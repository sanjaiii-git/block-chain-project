(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{647:(e,t,r)=>{Promise.resolve().then(r.bind(r,8659))},2890:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(5040).UU)("https://hnkolxztgvnyshsegpmj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhua29seHp0Z3ZueXNoc2VncG1qIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4NDEyMzgsImV4cCI6MjA3MzQxNzIzOH0.QqZ13pIpu0G-WebtuAIYfd6UdotPn9-7KuEoFSg5OAA")},8659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(2115),l=r(63),n=r(2890);let o=(0,r(5105).A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var i=r(7828);function d(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)(!1),[d,u]=(0,s.useState)("user"),[m,c]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[p,b]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[y,w]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[v,k]=(0,s.useState)(""),[I,C]=(0,s.useState)(""),S=async r=>{r.preventDefault(),h(!0),b("");try{if(t){let{data:t,error:r}=await n.N.auth.signUp({email:f,password:y,options:{data:{role:d,full_name:j,..."admin"===d&&{admin_department:v,admin_id:I}}}});if(r)throw r;if(t.user){let{error:r}=await n.N.from("profiles").insert([{id:t.user.id,email:t.user.email,full_name:j,role:d,..."admin"===d&&{admin_department:v,admin_id:I}}]);r&&console.error("Error creating profile:",r),"admin"===d?e.push("/admin/dashboard"):e.push("/user/dashboard")}}else{let{data:t,error:r}=await n.N.auth.signInWithPassword({email:f,password:y});if(r)throw r;if(t.user){let{data:r,error:s}=await n.N.from("profiles").select("*").eq("id",t.user.id).single();if(s&&"PGRST116"===s.code){var a;let{error:e}=await n.N.from("profiles").insert([{id:t.user.id,email:t.user.email||f,full_name:(null==(a=t.user.user_metadata)?void 0:a.full_name)||"User",role:d}]);if(e){console.error("Error creating profile:",e),b("Error creating user profile. Please try again.");return}}"admin"===d?e.push("/admin/dashboard"):e.push("/user/dashboard")}}}catch(e){b(e.message)}finally{h(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:t?"Create Account":"Welcome Back"}),(0,a.jsx)("p",{className:"text-gray-600",children:t?"Sign up for your account":"Sign in to your account"})]}),(0,a.jsxs)("div",{className:"flex bg-gray-100 rounded-xl p-1 mb-6 mt-6",children:[(0,a.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat("user"===d?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"),onClick:()=>u("user"),children:"\uD83E\uDDD1‍\uD83D\uDCBB User"}),(0,a.jsx)("button",{type:"button",className:"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat("admin"===d?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"),onClick:()=>u("admin"),children:"\uD83D\uDEE1️ Admin"})]}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"full-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,a.jsx)("input",{id:"full-name",name:"full-name",type:"text",required:!0,className:"mt-1 block w-full px-4 py-3 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 bg-white font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your full name",value:j,onChange:e=>N(e.target.value)})]}),"admin"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"admin-department",className:"block text-sm font-medium text-gray-700",children:"Department"}),(0,a.jsx)("input",{id:"admin-department",name:"admin-department",type:"text",required:!0,className:"mt-1 block w-full px-4 py-3 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 bg-white font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your department",value:v,onChange:e=>k(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"admin-id",className:"block text-sm font-medium text-gray-700",children:"Admin ID"}),(0,a.jsx)("input",{id:"admin-id",name:"admin-id",type:"text",required:!0,className:"mt-1 block w-full px-4 py-3 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 bg-white font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your admin ID",value:I,onChange:e=>C(e.target.value)})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,a.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"mt-1 block w-full px-4 py-3 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 bg-white font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your email",value:f,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:m?"text":"password",autoComplete:"current-password",required:!0,className:"mt-1 block w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 bg-white font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter your password",value:y,onChange:e=>w(e.target.value)}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 top-6 pr-3 flex items-center",onClick:()=>c(!m),children:m?(0,a.jsx)(o,{className:"h-5 w-5 text-gray-400"}):(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-400"})})]}),p&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:p})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:x,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:x?"Processing...":t?"Create Account":"Sign In"})})]}),(0,a.jsx)("div",{className:"text-center mt-6",children:(0,a.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",onClick:()=>r(!t),children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})})}}},e=>{e.O(0,[326,441,255,358],()=>e(e.s=647)),_N_E=e.O()}]);